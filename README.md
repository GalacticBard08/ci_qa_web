#   

Данный репо используется для тестирования web интеррфейса сервера. Содержит тесты для 4ех страниц.

В Каталоге [pages](web%2Fpages) содержится логика тестов, разделеные на соответствующие страницы

В каталоге [tests](web%2Ftests) содержатся сами тесты, разделеные на соответствующие страницы

- [test_admin_page.py](web%2Ftests%2Ftest_admin_page.py)
- [test_documentation_page.py](web%2Ftests%2Ftest_documentation_page.py)
- [test_header_tabs.py](web%2Ftests%2Ftest_header_tabs.py)
- [test_projects_page.py](web%2Ftests%2Ftest_projects_page.py)

В проекте должны так же содержаться тесты для Bench утилиты (упоминания о ней есть в коде), их продемонстрировать не
могу - удалил





---

<h1 align="center">This branch combines tests for the WEB and for BENCH</h1>

#### 1. [Подготовка ОС перед запуском тестов](#подготовка_ос)

#### 2. [Примеры запуска WEB тестов](#Запуск_тестов)

#### 3. [Описание принимаемых аргументов](#список_аргументов)

#### 4. [Запуск Бенч для выполнения тестов](#запуск_бенч)

#### 5. [Примеры запуска Бенч тестов](#запуск_тестов_бенч)

---
<a name="подготовка_ос"></a>

## Перед выолнением тестов, необходимо подготовить систему:

* Выполнить: `ci_qa_common/launch-qa-tests.sh --prepare-os` - _подготовит систему **автоматически**_
* Или выполнить требования **вручную**:
    * _GIT_ - для клонирования репозиториев (если требуется)
    * _Python > 3.7_
    * _Необходимые библиотеки_, указанные в requirements.txt
    * _Allure_ — Для просмотра отчетов
    * _webdriver_ - Для запуска браузера локально. Должен находится в каталоге
      с тестами
    * _selenium_server_ — Для запуска тестов должен быть установлен на виртуальной машине вместе с веб драйвером

---

<a name="Запуск_тестов"></a>

## Для запуска WEB тестов нужно использовать ключ `-m web`

#### Использование VENV развернутого с помощью ``/launch-qa-tests.sh --prepare-os``:

В командах ниже, используйте `~/qa_tests/venv/bin/python` вместо `python3`

#### Запуск WEB тестов, но только для страницы ПРОЕКТЫ, локально c сервером АКВС поумолчанию (127.0.0.1:11000):

`python3 -m pytest -sv -m web web/tests/test_projects_page.py --local-run`

#### Ручной запуск всех WEB тестов локально с работой браузера в фоне:

`python3 -m pytest -sv -m web --avs-server=VALUE --local-run --headless`

---
<a name="список_аргументов"></a>

# Принимаемые аргументы для запуска:

|       Ключ        |                           Описание                            | Значение по умолчанию | Зависимость                               |
|:-----------------:|:-------------------------------------------------------------:|:---------------------:|-------------------------------------------|
|   --avs-server    |          Указывает сервер на котором развернут АКВС           |    127.0.0.1:11000    | -                                         |
| --selenium-server |  Указывает селениум сервер запущенного  на удаленной машине   |    127.0.0.1:4444     | +Не используется+ совместно с --local-run |
|    --local-run    |          Если указан, тесты будут запускать локально          |         True          | -                                         |
|    --headless     | Если указан, браузер в котором выполняются тесты, будет скрыт |         False         | Используется только вместе с --local-run  |
|  --bench-server   |     Указывает сервер на котором развернут бенч в браузере     |    localhost:3000/    | Только для Бенч                           |

---

## Запуск Бенч для выполнения тестов:

<a name="запуск_бенч"></a>

У бенча есть способ запуска в браузере (только его веб часть):
В репо _*bench-ext*_ или в _*bench/bench-extension*_, выполнить:

`yarn ball`

`yarn bext`

В **.env** изменить `isViewDebug` на `True`

Далее запуск (F5) и:

`yarn smain`

Откроется браузер с веб части Бенч, после этого можно запускать тесты

---
<a name="запуск_тестов_бенч"></a>

### Для запуска тестов Бенч нужно использовать ключ `-m bench`

#### Запуск тестов для Бенч, локально, с указанием сервера АКВС (VALUE1) и сервера на котором развернут бенч (VALUE2):

`python3 -m pytest -sv -m bench --avs-server=VALUE1 --local-run --headless --bench-server=VALUE2`

#### Запуск тестов WEB локально с укзанным АКВС сервером:

`python3 -m pytest -sv -m web --avs-server=VALUE --local-run`